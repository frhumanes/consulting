{% load i18n %}

<h4>{{ mname }} {{ year }}</h4>

<table class="table table-condensed table-nohover table-hover-element">
    <thead>
      <tr>
        <th>{% trans "Mon" %}</th>
        <th>{% trans "Tue" %}</th>
        <th>{% trans "Wed" %}</th>
        <th>{% trans "Thu" %}</th>
        <th>{% trans "Fri" %}</th>
        <th>{% trans "Sat" %}</th>
        <th>{% trans "Sun" %}</th>
      </tr>
    </thead>
    <tbody>
        {% for week in month_days %}
            <tr class="center">
            {% for day, entries, current, vacations, events in week %}

                <td class= "center" onMouseOver="this.bgColor='#eeeeee';" onMouseOut="this.bgColor='transparent';">

                    {% if day != 0 %}
                        <a href="{% if request.user.get_profile.is_doctor %}
                                    {% url cal.views.day year month day %}
                                 {% else %}
                                    {% url cal.views.doctor_day year month day doctor.id %}
                                 {% endif %}">
                            <span class="
                                {% if current %}
                                    label label-info
                                {% else %}
                                    {% if vacations %}
                                        label label-important
                                    {% else %}
                                        {% if events %}
                                            label label-warning
                                        {% endif %}
                                    {% endif %}
                                {% endif %}">
                                {{ day }}
                            </span>
                        </a>
                    {% else %}
                        <a href="{% if request.user.get_profile.is_doctor %}
                                   {% url cal.views.day year month day %}
                                 {% else %}
                                   {% url cal.views.doctor_day year month day doctor.id %}
                                 {% endif %}">
                            <span class="
                                {% if current %}
                                    label label-info
                                {% else %}
                                    {% if vacations %}
                                        label label-important
                                    {% else %}
                                        {% if events %}
                                            label label-warning
                                        {% endif %}
                                    {% endif %}
                                {% endif %}">
                                {% if entries.count > 0 %}
                                    {{ day }} <i class="icon-list"></i>
                                {% endif %}
                            </span>
                        </a>
                    {% endif %}
                </td>
            {% endfor %}
            </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <th colspan='3'>
                <a href= "{% if request.user.get_profile.is_doctor %}
                            {% url cal.views.month year month "prev" %}
                          {% else %}
                            {% url cal.views.doctor_month year month doctor.id "prev" %}
                          {% endif %}">
                    &lt;&lt; Prev
                </a>
            </th>
            <th></th>
            <th colspan='3'>
                <a href= "{% if request.user.get_profile.is_doctor %}
                            {% url cal.views.month year month "next" %}
                          {% else %}
                            {% url cal.views.doctor_month year month doctor.id "next" %}
                          {% endif %}" class="pull-right">
                    Next &gt;&gt;
                </a>
            </th>
        </tr>
    </tfoot>
</table>
