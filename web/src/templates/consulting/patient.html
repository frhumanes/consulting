{% extends "ui/app.html" %}

{% load i18n%}

{% block js_files %}
  {{ block.super }}
  <script src="{{ STATIC_URL }}js/bootstrap-datepicker.js"></script>
{% endblock %}

{% block css_files %}
  {{ block.super }}
  <link href="{{ STATIC_URL }}css/datepicker.css" rel="stylesheet">
{% endblock %}

{% block jquery_init %}
  $('#dp').datepicker().on('changeDate',
    function(ev){$('#dp').datepicker('hide');
  });
{% endblock %}

{% block header%}
  {% if user.get_profile.is_doctor %}
        {% include "ui/includes/header_doctor.html" %}
  {% endif %}
  {% if user.get_profile.is_administrative %}
        {% include "ui/includes/header_administrative.html" %}
  {% endif %} 
{% endblock  %}

{% block body %}
    <div class="container">
      {% block nav-bar%}
        {% if user.get_profile.is_doctor %}
          {% include "ui/includes/nav_bar_doctor_admin.html" %}
        {% endif %}
      {% endblock  %}
      <section>
        <div class="page-header">
          <h2>{% trans 'PACIENTE' %}</h2>
        </div>        
        <div class="row" >
          <div class="span offset3 {% if edit %}alert alert-info card{% endif %}">
            {% if not edit %}
            <form class="form-horizontal" id="form" action="." method="post" accept-charset="utf-8">{% csrf_token %}
            {% endif %}
            {% if edit %}
            <form class="form-horizontal" id="form" action="{% url consulting_editpatient_pm patient_user_id %}" method="post" accept-charset="utf-8">{% csrf_token %}
            {% endif %} 
            <input type="hidden" name="next" value="{{ next }}"/>             
              {% if same_username %}
                <div class="alert alert-error">
                  <a class="close" data-dismiss="alert">Ã—</a>
                  <strong>
                    {% trans 'Ya existe un usuario con el mismo nombre de usuario. Contacte con el administrador. ' %}
                  </strong>
                </div>
              {% endif %}
              <div class="control-group">
                <label class="control-label">
                  {{ form.name.label }}
                </label>
                <div class="controls">
                  {{form.name}}
                  {% if form.name.errors %}
                    {{ form.name.errors }}
                  {% endif %}
                </div>
              </div>
               <div class="control-group">
                <label class="control-label">
                  {{form.first_surname.label}}
                </label>
                <div class="controls">
                  {{form.first_surname}}
                  {% if form.first_surname.errors %}
                    {{ form.first_surname.errors }}
                  {% endif %}
                </div>
              </div>
             <div class="control-group">
                <label class="control-label">
                  {{form.second_surname.label}}
                </label>
                <div class="controls">
                  {{form.second_surname}}
                  {% if form.second_surname.errors %}
                    {{ form.second_surname.errors }}
                  {% endif %}
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">
                  {{form.nif.label}}
                </label>
                <div class="controls">
                  {{form.nif}}
                  <span class="help-inline">
                    {% trans 'Pacientes con NIF o mayores de edad' %}
                  </span>
                  {% if form.nif.errors %}
                    {{ form.nif.errors }}
                  {% endif %}
                </div>
              </div>
              {% if user.get_profile.is_doctor %}
              <div class="control-group">
                <label class="control-label">
                  {{form.sex.label}}
                </label>
                <div class="controls">
                  {{form.sex}}
                  {% if form.sex.errors %}
                    {{ form.sex.errors }}
                  {% endif %}
                </div>
              </div>
              {% endif %}
              <div class="control-group">
                <label class="control-label">
                  {{form.address.label}}
                </label>
                <div class="controls">
                  {{form.address}}
                  {% if form.address.errors %}
                    {{ form.address.errors }}
                  {% endif %}
                </div>
              </div>
               <div class="control-group">
                <label class="control-label">
                  {{form.town.label}}
                </label>
                <div class="controls">
                  {{form.town}}
                  {% if form.town.errors %}
                    {{ form.town.errors }}
                  {% endif %}
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">
                  {{form.postcode.label}}
                </label>
                <div class="controls">
                  {{form.postcode}}
                  {% if form.postcode.errors %}
                    {{ form.postcode.errors }}
                  {% endif %}
                </div>
              </div>
              {% if user.get_profile.is_doctor %}
                <div class="control-group">
                  <label class="control-label">
                    {{form.status.label}}
                  </label>
                  <div class="controls">
                    {{form.status}}
                    {% if form.status.errors %}
                      {{ form.status.errors }}
                    {% endif %}
                  </div>
                </div>
              {% endif %}
              <div class="control-group">
                <label class="control-label">
                  {{form.dob.label}}
                </label>
                <div class="controls">
                  <div id="dp" class="input-append date" data-date-format="dd/mm/yyyy" data-date-weekstart="1">
                    {{form.dob}}
                    <span class="add-on">
                      <i class="icon-th"></i>
                    </span>
                    <span class="help-inline">
                      {% trans 'Pacientes menores de edad sin NIF' %}
                    </span>
                  </div>
                  {% if form.dob.errors %}
                    {{ form.dob.errors }}
                  {% endif %}
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">
                  {{form.phone1.label}}
                </label>
                <div class="controls">
                  {{form.phone1}}
                  {% if form.phone1.errors %}
                    {{ form.phone1.errors }}
                  {% endif %}
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">
                  {{form.phone2.label}}
                </label>
                <div class="controls">
                  {{form.phone2}}
                  {% if form.phone2.errors %}
                    {{ form.phone2.errors }}
                  {% endif %}
                </div>
              </div>
              <div class="control-group">
                <label class="control-label">
                  {{form.email.label}}
                </label>
                <div class="controls">
                  {{form.email}}
                  {% if form.email.errors %}
                    {{ form.email.errors }}
                  {% endif %}
                </div>
              </div>
              {% if user.get_profile.is_doctor %}
              <div class="control-group">
                <label class="control-label">
                  {{form.profession.label}}
                </label>
                <div class="controls">
                  {{form.profession}}
                  {% if form.profession.errors %}
                    {{ form.profession.errors }}
                  {% endif %}
                </div>
              </div>
              {% endif %}
              <div class="controls span1">
                <button type="submit" class="btn btn-primary btn-large">
                  {% trans 'Guardar' %}
                </button>
              </div>
            </fieldset>
            </form>
          </div>  
        </div>
      </section>
    </div>
{% endblock body %}
