{% extends "private_messages/includes/base.html" %}

{% load i18n%}

{% block jquery_init %}
  $('#id_body').wysihtml5({
    "font-styles": true, //Font styling, e.g. h1, h2, etc. Default true
    "emphasis": true, //Italics, bold, etc. Default true
    "lists": true, //(Un)ordered lists, e.g. Bullets, Numbers. Default true
    "html": false, //Button which allows you to edit the generated HTML. Default false
    "link": {{request.user.get_profile.is_patient|yesno:'false,true'}}, //Button to insert a link. Default true
    "image": false, //Button to insert an image. Default true);
    "stylesheets": ["{{ STATIC_URL }}css/bootstrap-wysihtml5.css"]
  });
{% endblock %}

{% block container %}
<section>
  <div class="page-header">
  {% if replying %}
    <h1>{% trans 'Nueva respuesta' %}</h1>
    {% include "private_messages/message_detail.html" with message=parent_message replying=replying %}
  {% else %}
    <h1>{% trans 'Nuevo correo' %}</h1>
  {% endif %}
  </div>

{% if form.non_field_errors  %}
    <div class="alert alert-error">
        {% for error in form.non_field_errors %}
            <strong>{% trans 'Â¡Error!' %}</strong>
            {{ error|escape }}
        {% endfor %}
    </div>
{% endif %}
<form class="form-horizontal" method="post" action="" enctype="multipart/form-data">{% csrf_token %}
  <fieldset>
      <!-- RECIPIENT -->
      {% if form.recipient.errors %}
        <div class="control-group error">
          <label for="id_recipient" class="control-label">{{form.recipient.label}}</label>
          <div class="controls">
            {{ form.recipient }}
            {% for error in form.recipient.errors %}
               <span class="help-inline">{{ error|escape }}</span>
            {% endfor %}
          </div>
        </div>
      {% else %}
        <div class="control-group">
          <label for="id_recipient" class="control-label">{{form.recipient.label}}</label>
          <div class="controls">
            {{ form.recipient }}
          </div>
        </div>
      {% endif %}
      <!-- END RECIPIENT -->
      
      <!-- SUBJECT -->
      {% if form.subject.errors %}
        <div class="control-group error">
          <label for="id_subject" class="control-label">{{form.subject.label}}</label>
          <div class="controls">
            {{ form.subject }}
            {% for error in form.subject.errors %}
               <span class="help-inline">{{ error|escape }}</span>
            {% endfor %}
          </div>
        </div>
      {% else %}
        <div class="control-group">
          <label for="id_subject" class="control-label">{{form.subject.label}}</label>
          <div class="controls">
            {{ form.subject }}
          </div>
        </div>
      {% endif %}
      <!-- END SUBJECT -->

      <!-- BODY -->
      {% if form.body.errors %}
        <div class="control-group error">
          <label for="id_body" class="control-label">{{form.body.label}}</label>
          <div class="controls">
            {{ form.body }}
            {% for error in form.body.errors %}
               <span class="help-inline">{{ error|escape }}</span>
            {% endfor %}
          </div>
        </div>
      {% else %}
        <div class="control-group">
          <label for="id_body" class="control-label">{{form.body.label}}</label>
          <div class="controls">
            {{ form.body }}
          </div>
        </div>
      {% endif %}
      <!-- END BODY -->

      {% if form.attachment.errors %}
        <div class="control-group error {{request.user.get_profile.is_patient|yesno:'hidden,' }}">
          <label for="id_attachment" class="control-label">{{form.attachment.label}}</label>
          <div class="controls">
            {{ form.attachment }}
            {% for error in form.attachment.errors %}
               <span class="help-inline">{{ error|escape }}</span>
            {% endfor %}
          </div>
        </div>
      {% else %}
        <div class="control-group {{request.user.get_profile.is_patient|yesno:'hidden,' }}">
          <label for="id_attachment" class="control-label">{{form.attachment.label}}</label>
          <div class="controls">
            {{ form.attachment }}
          </div>
        </div>
      {% endif %}



      <div class="form-actions center">
        <button class="btn btn-large btn-primary btn-block" type="submit">{% trans 'Enviar' %}</button>
      </div>

  </fieldset>
</form>
</section>
{% endblock %}
